<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>警用 - Streamax知识库</title>
    <!-- 引入Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body {
            padding-top: 50px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1 class="mb-4">警用解决方案</h1>
        <nav aria-label="breadcrumb">
            <ol class="breadcrumb">
                <li class="breadcrumb-item"><a href="../index.html">首页</a></li>
                <li class="breadcrumb-item active" aria-current="page">警用</li>
            </ol>
        </nav>
        
        <div class="card mb-4">
            <div class="card-body">
                <h5 class="card-title">警用解决方案概述</h5>
                <p class="card-text">Streamax警用解决方案为公安部门提供全方位的车辆监控、执法记录和指挥调度服务，助力公安信息化建设，提高执法效率和安全性。</p>
            </div>
        </div>
        
        <div class="card mb-4">
            <div class="card-body">
                <h5 class="card-title">核心功能</h5>
                <ul>
                    <li>执法记录：高清视频记录执法过程，支持实时上传和远程查看</li>
                    <li>车辆监控：实时监控警车位置、状态和行驶轨迹</li>
                    <li>指挥调度：可视化指挥调度，支持一键呼叫和群聊功能</li>
                    <li>应急响应：快速响应突发事件，支持多部门协同作战</li>
                    <li>数据分析：提供执法数据统计和分析报告，支持决策参考</li>
                    <li>证据管理：安全存储和管理执法证据，支持快速检索和回放</li>
                    <li>远程控制：支持远程控制车辆设备，如灯光、警报等</li>
                    <li>联网协作：支持与其他警用系统联网协作，实现信息共享</li>
                </ul>
            </div>
        </div>
        
        <div class="card mb-4">
            <div class="card-body">
                <h5 class="card-title">技术特点</h5>
                <ul>
                    <li>高清视频：支持4K高清视频录制和传输</li>
                    <li>强固设计：适应各种恶劣环境，防水防尘防震动</li>
                    <li>加密存储：采用多重加密技术，保障数据安全</li>
                    <li>实时传输：支持4G/5G网络，实现低延迟视频传输</li>
                    <li>GPS/北斗双定位：高精度定位，确保位置信息准确</li>
                    <li>大容量存储：支持大容量存储卡，满足长时间记录需求</li>
                    <li>易操作性：简洁直观的操作界面，便于民警快速上手</li>
                    <li>可扩展性：支持多种设备接入和功能扩展</li>
                </ul>
            </div>
        </div>
        
        <div class="card mb-4">
            <div class="card-body">
                <h5 class="card-title">应用场景</h5>
                <ul>
                    <li>巡逻防控：日常巡逻和治安防控</li>
                    <li>交通执法：交通违法行为查处和事故处理</li>
                    <li>应急处突：突发事件应急处置和救援</li>
                    <li>反恐维稳：反恐处突和维稳工作</li>
                    <li>大型活动安保：演唱会、运动会等大型活动安保</li>
                    <li>社区警务：社区治安管理和服务</li>
                    <li>边境防控：边境地区巡逻和防控</li>
                    <li>森林公安：森林资源保护和防火工作</li>
                </ul>
            </div>
        </div>
        
        <!-- 文件列表模块 -->
        <div class="card mb-4">
            <div class="card-header">
                <h5 class="mb-0">文件列表</h5>
            </div>
            <div class="card-body">
                <ul id="file-list" class="list-group list-group-flush">
                    <!-- 文件列表将通过JavaScript动态生成 -->
                </ul>
            </div>
        </div>
        
        <footer class="mt-5 pt-4 border-top">
            <p class="text-muted">© 2026 Streamax知识库</p>
        </footer>
    </div>
    
    <!-- 引入Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    
    <script>
        // GitHub API 配置
        const repoOwner = 'maozuxiao';
        const repoName = 'Streamax';
        const branch = 'main';
        
        // 获取当前目录路径，确定API请求路径
        const currentPath = window.location.pathname;
        const isRoot = currentPath === '/docs/' || currentPath === '/docs/index.html' || currentPath.endsWith('/Streamax/docs/') || currentPath.endsWith('/Streamax/docs/index.html');
        
        // 确定API请求的目录路径
        let apiPath = 'docs';
        if (!isRoot) {
            // 从URL中提取目录路径
            const parts = currentPath.split('/');
            const docsIndex = parts.indexOf('docs');
            if (docsIndex !== -1 && parts.length > docsIndex + 1) {
                // 构建docs/后的路径
                const subPath = parts.slice(docsIndex + 1, -1).join('/'); // 移除最后一个元素（文件名）
                apiPath = `docs/${subPath}`;
            }
        }
        
        // 获取文件列表容器
        const fileList = document.getElementById('file-list');
        
        // 使用GitHub API获取文件列表
        fetch(`https://api.github.com/repos/${repoOwner}/${repoName}/contents/${apiPath}?ref=${branch}`)
            .then(response => {
                if (!response.ok) {
                    throw new Error(`GitHub API 请求失败: ${response.status}`);
                }
                return response.json();
            })
            .then(data => {
                // 清空文件列表
                fileList.innerHTML = '';
                
                // 支持的文件格式
                const supportedFormats = ['.pdf', '.md', '.markdown', '.html'];
                
                // 要排除的文件
                const excludedFiles = ['index.html', 'readme.md', 'markdown-viewer.html'];
                
                // 分离目录和文件
                const folders = data.filter(item => item.type === 'dir');
                const files = data.filter(item => 
                    item.type === 'file' && 
                    supportedFormats.includes('.' + item.name.split('.').pop().toLowerCase()) && 
                    !excludedFiles.includes(item.name.toLowerCase())
                );
                
                // 添加目录
                folders.forEach(folder => {
                    const listItem = document.createElement('li');
                    listItem.className = 'list-group-item';
                    
                    const link = document.createElement('a');
                    link.href = `${folder.name}/index.html`;
                    link.textContent = folder.name;
                    link.className = 'text-decoration-none';
                    link.target = '_self';
                    
                    listItem.appendChild(link);
                    fileList.appendChild(listItem);
                });
                
                // 添加文件
                files.forEach(file => {
                    const listItem = document.createElement('li');
                    listItem.className = 'list-group-item';
                    
                    const link = document.createElement('a');
                    link.className = 'text-decoration-none';
                    
                    // 构建文件链接
                    const fileExtension = '.' + file.name.split('.').pop().toLowerCase();
                    if (fileExtension === '.md' || fileExtension === '.markdown') {
                        // MD文件使用markdown-viewer.html
                        const relativePath = isRoot ? file.name : `${apiPath.replace('docs/', '')}/${file.name}`;
                        link.href = `../markdown-viewer.html?file=${encodeURIComponent(relativePath)}`;
                    } else {
                        // HTML和PDF文件直接打开
                        link.href = file.name;
                    }
                    
                    link.textContent = file.name;
                    
                    listItem.appendChild(link);
                    fileList.appendChild(listItem);
                });
                
                // 如果没有文件，显示提示信息
                if (folders.length === 0 && files.length === 0) {
                    const listItem = document.createElement('li');
                    listItem.className = 'list-group-item text-muted';
                    listItem.textContent = '当前目录下没有支持的文件';
                    fileList.appendChild(listItem);
                }
            })
            .catch(error => {
                console.error('Error fetching files:', error);
                // 如果API调用失败，显示错误信息
                const listItem = document.createElement('li');
                listItem.className = 'list-group-item text-danger';
                listItem.textContent = `无法获取文件列表: ${error.message}`;
                fileList.appendChild(listItem);
            });
    </script>
</body>
</html>