<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FT Cloud - Streamax知识库</title>
    <!-- 引入Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body {
            padding-top: 50px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1 class="mb-4">FT Cloud货运云平台</h1>
        <nav aria-label="breadcrumb">
            <ol class="breadcrumb">
                <li class="breadcrumb-item"><a href="../../index.html">首页</a></li>
                <li class="breadcrumb-item"><a href="../index.html">云平台</a></li>
                <li class="breadcrumb-item active" aria-current="page">FT Cloud</li>
            </ol>
        </nav>
        
        <div class="card mb-4">
            <div class="card-body">
                <h5 class="card-title">FT Cloud概述</h5>
                <p class="card-text">FT Cloud是Streamax专为货运行业打造的专业云平台，提供全方位的车辆监控、货物追踪和运营管理服务，帮助物流企业提高运营效率和服务质量。</p>
            </div>
        </div>
        
        <div class="card mb-4">
            <div class="card-body">
                <h5 class="card-title">核心功能</h5>
                <ul>
                    <li>车辆监控：实时查看车辆位置、状态和行驶轨迹</li>
                    <li>货物追踪：全程监控货物状态，确保货物安全</li>
                    <li>司机管理：记录司机行为，分析驾驶习惯</li>
                    <li>油耗管理：实时监控油耗，分析油耗异常</li>
                    <li>路线规划：智能规划最优路线，提高运输效率</li>
                    <li>告警管理：及时处理各种异常情况，如超速、疲劳驾驶等</li>
                    <li>运营分析：提供丰富的运营数据统计和分析报告</li>
                    <li>客户服务：提供客户自助查询功能，提高服务质量</li>
                </ul>
            </div>
        </div>
        
        <div class="card mb-4">
            <div class="card-body">
                <h5 class="card-title">技术特点</h5>
                <ul>
                    <li>行业定制：专为货运行业设计，满足行业特殊需求</li>
                    <li>高可靠性：采用分布式架构，确保系统稳定运行</li>
                    <li>易用性：直观的Web界面，操作简单便捷</li>
                    <li>扩展性：支持灵活扩展，适应企业发展需求</li>
                    <li>安全性：多重加密技术，保障数据安全</li>
                    <li>移动支持：支持手机APP访问，随时随地管理</li>
                </ul>
            </div>
        </div>
        
        <div class="card mb-4">
            <div class="card-body">
                <h5 class="card-title">应用场景</h5>
                <ul>
                    <li>干线运输：长途货车运输监控和管理</li>
                    <li>城市配送：同城货物配送管理</li>
                    <li>危险品运输：特殊货物全程监控</li>
                    <li>冷链运输：温度监控和管理</li>
                    <li>大件运输：超限货物运输管理</li>
                    <li>车队管理：企业自有车队和外协车队管理</li>
                </ul>
            </div>
        </div>
        
        <!-- 文件列表模块 -->
        <div class="card mb-4">
            <div class="card-header">
                <h5 class="mb-0">文件列表</h5>
            </div>
            <div class="card-body">
                <ul id="file-list" class="list-group list-group-flush">
                    <!-- 文件列表将通过JavaScript动态生成 -->
                </ul>
            </div>
        </div>
        
        <footer class="mt-5 pt-4 border-top">
            <p class="text-muted">© 2026 Streamax知识库</p>
        </footer>
    </div>
    
    <!-- 引入Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    
    <script>
        // 支持的文件格式
        const supportedFormats = ['.pdf', '.md', '.markdown', '.html'];
        
        // GitHub API 配置
        const repoOwner = 'maozuxiao';
        const repoName = 'Streamax';
        const branch = 'main';
        const docsPath = 'docs';
        
        // 获取当前目录路径
        const currentPath = window.location.pathname;
        let apiPath = docsPath;
        
        // 如果不是根目录，解析当前路径
        if (currentPath.includes('/docs/') && currentPath !== '/docs/' && currentPath !== '/docs/index.html') {
            const pathParts = currentPath.split('/docs/')[1];
            const dirPath = pathParts.split('/').slice(0, -1).join('/');
            if (dirPath) {
                apiPath = `${docsPath}/${dirPath}`;
            }
        }
        
        // 获取文件列表容器
        const fileList = document.getElementById('file-list');
        
        // 使用GitHub API获取文件列表
        fetch(`https://api.github.com/repos/${repoOwner}/${repoName}/contents/${apiPath}?ref=${branch}`)
            .then(response => {
                if (!response.ok) {
                    throw new Error('Network response was not ok');
                }
                return response.json();
            })
            .then(data => {
                // 过滤出文件，排除目录
                const files = data.filter(item => item.type === 'file');
                
                // 处理文件列表
                const processedFiles = files.map(file => {
                    const fileName = file.name;
                    const fileExtension = '.' + fileName.split('.').pop().toLowerCase();
                    return { name: fileName, type: fileExtension };
                });
                
                // 过滤文件，只显示支持的格式
                const filteredFiles = processedFiles.filter(file => supportedFormats.includes(file.type));
                
                // 按文件名排序
                filteredFiles.sort((a, b) => a.name.localeCompare(b.name));
                
                // 生成文件列表
                filteredFiles.forEach(file => {
                    const listItem = document.createElement('li');
                    listItem.className = 'list-group-item';
                    
                    const link = document.createElement('a');
                    link.href = '#';
                    link.textContent = file.name;
                    link.className = 'text-decoration-none';
                    
                    // 根据文件类型设置不同的处理逻辑
                    link.addEventListener('click', (e) => {
                        e.preventDefault();
                        
                        if (file.type === '.md' || file.type === '.markdown') {
                            // 对于md文件，跳转到markdown渲染器页面
                            // 构造相对路径
                            let relativePath = '';
                            if (currentPath.includes('/docs/') && currentPath !== '/docs/' && currentPath !== '/docs/index.html') {
                                const pathParts = currentPath.split('/docs/')[1];
                                const dirPath = pathParts.split('/').slice(0, -1).join('/');
                                if (dirPath) {
                                    relativePath = `${dirPath}/${file.name}`;
                                } else {
                                    relativePath = file.name;
                                }
                            } else {
                                relativePath = file.name;
                            }
                            window.location.href = `../markdown-viewer.html?file=${encodeURIComponent(relativePath)}`;
                        } else if (file.type === '.html') {
                            // 检查是否存在同名的md文件
                            const hasSameNameMd = filteredFiles.some(f => 
                                f.name.replace(f.type, '') === file.name.replace(file.type, '') && 
                                (f.type === '.md' || f.type === '.markdown')
                            );
                            
                            if (hasSameNameMd) {
                                // 如果存在同名md文件，优先显示md文件
                                const mdFileName = file.name.replace('.html', '.md');
                                // 构造相对路径
                                let relativePath = '';
                                if (currentPath.includes('/docs/') && currentPath !== '/docs/' && currentPath !== '/docs/index.html') {
                                    const pathParts = currentPath.split('/docs/')[1];
                                    const dirPath = pathParts.split('/').slice(0, -1).join('/');
                                    if (dirPath) {
                                        relativePath = `${dirPath}/${mdFileName}`;
                                    } else {
                                        relativePath = mdFileName;
                                    }
                                } else {
                                    relativePath = mdFileName;
                                }
                                window.location.href = `../markdown-viewer.html?file=${encodeURIComponent(relativePath)}`;
                            } else {
                                // 否则直接打开html文件
                                window.location.href = file.name;
                            }
                        } else {
                            // 对于pdf文件，直接打开
                            window.location.href = file.name;
                        }
                    });
                    
                    listItem.appendChild(link);
                    fileList.appendChild(listItem);
                });
                
                // 如果没有文件，显示提示信息
                if (filteredFiles.length === 0) {
                    const listItem = document.createElement('li');
                    listItem.className = 'list-group-item text-muted';
                    listItem.textContent = '当前目录下没有支持的文件';
                    fileList.appendChild(listItem);
                }
            })
            .catch(error => {
                console.error('Error fetching files:', error);
                // 如果API调用失败，显示错误信息
                const listItem = document.createElement('li');
                listItem.className = 'list-group-item text-danger';
                listItem.textContent = '无法获取文件列表，请稍后重试';
                fileList.appendChild(listItem);
            });
    </script>
</body>
</html>